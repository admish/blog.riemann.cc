
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Worth Mentioning</title>
  <meta name="author" content="Robert Riemann">

  
  <meta name="description" content="Hi planetkde, hi readers from planet gnome (so called aliens1), I’ve just stumbled upon a blog post dealing with a potential
collaboration of KDE and &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.riemann.cc/page/15">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://blog.riemann.cc/atom.xml" rel="alternate" title="Worth Mentioning" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif:400,700,700italic|Droid+Sans+Mono' rel='stylesheet' type='text/css'>


<link rel="stylesheet" href="/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen" />
<link rel="stylesheet" href="/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen" />

<script type="text/javascript" src="/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>
<script type="text/javascript" src="/fancybox/jquery.fancybox.pack.js?v=2.1.4"></script>
<script type="text/javascript" src="/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="/fancybox/helpers/jquery.fancybox-media.js?v=1.0.5"></script>
<script type="text/javascript" src="/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12737249-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  
  <h1><a href="/">Worth Mentioning</a></h1>
  
    <h2>nothing else</h2>
  
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://blog.riemann.cc/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.riemann.cc" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="http://github.com/saLOUt">Code</a></li>
  <li><a href="http://www.flickr.com/photos/27621704@N07/">Photos</a></li>
<!--   <li><a href="http://www.lastfm.de/user/saLOUt">Music</a></li> -->
  <li><a href="http://www.facebook.com/rriemann">Facebook</a></li>
  <li><a href="http://www.couchsurfing.org/people/salout">Couchsurfing</a></li>
  <li><a href="http://people.physik.hu-berlin.de/~rriemann/">Files</a></li>
  <li><a href="/about/">About</a></li>
</ul>
</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/03/23/requires_owncloud_serverside_backend/">Does Owncloud Really Requires a Server-side Backend?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-23T00:00:00-06:00" pubdate data-updated="true">Mar 23<span>rd</span>, 2010</time>
        
         | <a href="/2010/03/23/requires_owncloud_serverside_backend/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Hi planetkde, hi readers from planet gnome (so called aliens<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>),</p>

<p>I’ve just stumbled upon a <a href="http://www.webupd8.org/2010/03/gnome-and-kde-might-collaborate-into.html" title="Gnome And KDE Might Collaborate Into Creating A FLOSS Alternative To Dropbox">blog post</a> dealing with a potential
collaboration of KDE and gnome to initiate a replacement for dropbox, called
<a href="http://owncloud.org" title="official ownCloud homepage/wiki">ownCloud</a>.</p>

<p>There are already thoughts about possible GSoC projects giving attention to the
gnome/KDE frontend clients and to the <strong>server backend</strong>.</p>

<p>Nice idea, but in my humble opinion there is a problem, at least for me:
I haven’t a hosted root server, but a lot of unix accounts with user webspace,
where it is impossible to run any kind of background services/daemons.</p>

<p>Think of:</p>

<ul>
  <li>university accounts</li>
  <li>(scientific) institute accounts</li>
  <li>accounts from your IT related work</li>
</ul>

<p>Think of people, who probably uses linux.</p>

<p>In the case that ownCloud is meant to be <em>the</em> center of all data synchronisations,
it would be sad that those people who <em>only</em> have webspace cannot take advantage of it.</p>

<p>So I encourage the developer to design the ownCloud in a way that makes the 
server-side backend software only optional, but not a requirement.</p>

<p>This would be similar to git, which can use a server side backend (git://), but
is also satisfied with a simple sftp connection (ssh://).
(Please correct me if I am wrong.)</p>

<p>After all you might want to read an <a href="http://www.gnu.org/philosophy/who-does-that-server-really-serve.html" title="How Software as a Service Takes Away Your Freedom">article</a> about the disadvantages of
SaaS published by <a href="http://www.gnu.org">http://www.gnu.org</a>. Exaggerated message in one sentence: Don’t get dependant of other
people server services. <code>;)</code></p>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Just a joke. Don’t take it serious.<a href="#fnref:1" rel="reference">&#8617;</a></p>
    </li>
  </ol>
</div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/03/03/klipper_compatible_url_shortener/">Klipper-compatible URL-Shortener Script</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-03T00:00:00-06:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2010</time>
        
         | <a href="/2010/03/03/klipper_compatible_url_shortener/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="the-next-klipper-action">The next Klipper action</h2>

<p>In my <a href="http://blog.riemann.cc/blog/2010/03/03/awesome_klipper_workflow.html" title="How to configure Klipper to work with pastie.rb script">last</a> blog entry I explained how to send the clipboard content via
KDE Klipper to a pastebin service.</p>

<p>Now I wrote a quick-and-dirty script to transform a URI in the clipboard to a
shortenend version using <a href="http://ur1.ca">http://ur1.ca</a> (U R One; it is GPL).</p>

<p>I never figured out how to get automatic URL shortening with <a href="http://identi.ca">http://identi.ca</a>
and <a href="http://choqok.gnufolks.org/" title="Open Source KDE Mikroblogging Client">Choqok</a>. That’s a kind of universal work-around for me.</p>

<p>Copy the file ur1.rb to a folder which is in your <code>$PATH</code> and add a Klipper
action as I explained in the last post. To setup your Klipper action you will
need the following:</p>

<dl>
  <dt>RegExp for matching URLs</dt>
  <dd><code>(^(http|https|ftp):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(([0-9]{1,5})?\/.*)?$)</code></dd>
  <dt>Command for Klipper action</dt>
  <dd><code>ur1.rb %s</code></dd>
</dl>

<p>You can trigger actions manually by <code>&lt;Ctrl&gt;+&lt;Alt&gt;+&lt;R&gt;</code> (KDE default).</p>

<h2 id="ur1rb">ur1.rb</h2>

<p>Copy this file to your <code>~/bin</code> and make it executable.</p>

<dl>
  <dt>Usage</dt>
  <dd><code>ur1.rb URL</code></dd>
  <dt>Example</dt>
  <dd><code>ur1.rb http://linux.com</code></dd>
</dl>

<p>The script will return the url in case of no errors and otherwise a short string
indicating the error.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>ur1.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
</pre></td><td class="code"><pre><code class="rb"><span class="line"><span class="c1">#!/usr/bin/env ruby</span>
</span><span class="line"><span class="c1"># kate: remove-trailing-space on; replace-trailing-space-save on; indent-width 2; indent-mode ruby; syntax ruby;</span>
</span><span class="line"><span class="c1"># ur1.rb</span>
</span><span class="line">
</span><span class="line"><span class="nb">require</span> <span class="s1">&#39;net/http&#39;</span>
</span><span class="line"><span class="nb">require</span> <span class="s1">&#39;cgi&#39;</span>
</span><span class="line"><span class="nb">require</span> <span class="s1">&#39;uri&#39;</span>
</span><span class="line">
</span><span class="line"><span class="no">URL</span> <span class="o">=</span> <span class="no">URI</span><span class="o">.</span><span class="n">parse</span> <span class="s2">&quot;http://ur1.ca/&quot;</span>
</span><span class="line"><span class="k">raise</span> <span class="k">if</span> <span class="no">ARGV</span><span class="o">.</span><span class="n">size</span> <span class="o">==</span> <span class="mi">0</span>
</span><span class="line"><span class="n">longurl</span> <span class="o">=</span> <span class="no">ARGV</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</span><span class="line">
</span><span class="line"><span class="n">http</span> <span class="o">=</span> <span class="ss">Net</span><span class="p">:</span><span class="ss">:HTTP</span><span class="o">.</span><span class="n">new</span> <span class="no">URL</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="no">URL</span><span class="o">.</span><span class="n">port</span>
</span><span class="line">
</span><span class="line"><span class="n">query_string</span> <span class="o">=</span> <span class="s2">&quot;longurl=</span><span class="si">#{</span><span class="no">CGI</span><span class="o">.</span><span class="n">escape</span> <span class="n">longurl</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class="line">
</span><span class="line"><span class="n">response</span><span class="p">,</span> <span class="n">body</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">start</span> <span class="k">do</span> <span class="o">|</span><span class="n">http</span><span class="o">|</span>
</span><span class="line">  <span class="n">http</span><span class="o">.</span><span class="n">post</span> <span class="no">URL</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">query_string</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="nb">abort</span> <span class="s2">&quot;error (wrong response code)&quot;</span> <span class="k">unless</span> <span class="n">response</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="s1">&#39;200&#39;</span>
</span><span class="line">
</span><span class="line"><span class="nb">puts</span> <span class="p">(</span><span class="n">body</span><span class="o">[</span><span class="sr">/&lt;p class=&quot;success&quot;&gt;Your ur1 is: &lt;a href=&quot;(.+)&quot;/</span><span class="p">,</span><span class="mi">1</span><span class="o">]</span> <span class="ow">or</span> <span class="s2">&quot;error (no url returned)&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/03/03/awesome_klipper_workflow/">Awesome Klipper Workflow</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-03-03T00:00:00-06:00" pubdate data-updated="true">Mar 3<span>rd</span>, 2010</time>
        
         | <a href="/2010/03/03/awesome_klipper_workflow/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="copy-your-clipboard-to-the-pastebin">Copy your clipboard to the pastebin</h2>

<p><img src="http://blog.riemann.cc/images/klipper_pastie_menu.png" alt="Klipper Pastie.org Menu" class="right" />
When you are a power IRC user, you might know the problem. You cannot copy the
whole source code, error message or log file etc. directly in the IRC channel.
You need a pastebin. I like <a href="http://pastie.org">http://pastie.org</a> really much. It has a clean
interface and supports highlighting for many languages. But how to copy the text
to the pastebin in a handy and short way?</p>

<p>Do the following to copy the clipboard content to the pastebin by a simple
<code>&lt;Ctrl&gt;+&lt;Alt&gt;+&lt;R&gt;</code> (global shortcut to open Klipper actions) and a click:</p>

<ul>
  <li>Copy the file pastie.rb to a folder which is in your <code>$PATH</code></li>
  <li>Make the file executable for you</li>
  <li>Edit the actions of Klipper and add for the <code>.*</code> Regexp (means: no special string)
a new action (do not activate automatic).</li>
  <li>Add the command <code>echo '%s' | pastie.rb</code>, feedback should go to clipboard and
set the description to “post as plain text” for instance</li>
  <li>You can add another command <code>echo '%s' | pastie.rb -f ruby</code> to paste the text with
ruby syntax highlighting</li>
</ul>

<p><img src="http://blog.riemann.cc/images/klipper_pastie_settings.png" alt="Klipper Pastie.org Settings" class="right" />
After that you should be able to send your clipboard to the pastebin with one
selection (to copy text into clipboard), one hotkey (to trigger Klipper actions)
and one click (to choose between different highlighters). You can paste the URL
with a single click on the middle button of your mouse. You don’t even have to
open the pastebin page yourself!</p>

<p>I like it. Just want to share this with you in the case you was locking for
something similiar. <code>:)</code></p>

<h2 id="pastierb">pastie.rb</h2>

<p>Copy this file to your <code>~/bin</code> and make it executable.</p>

<p>A big thank to the unknown author of this file. I found it via google on
<a href="http://pastie.org">http://pastie.org</a> and did only some minor modifications on it.</p>

<p>You can use the pastie.rb script via command line by pipe a file to it.
To set the code highlighting use the switch <code>-f LANG</code>. To get all supported
languages you want to try a <code>pastie.rb -h</code>.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>pastie.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
<span class="line-number">107</span>
<span class="line-number">108</span>
<span class="line-number">109</span>
<span class="line-number">110</span>
<span class="line-number">111</span>
<span class="line-number">112</span>
<span class="line-number">113</span>
<span class="line-number">114</span>
<span class="line-number">115</span>
<span class="line-number">116</span>
<span class="line-number">117</span>
<span class="line-number">118</span>
<span class="line-number">119</span>
<span class="line-number">120</span>
<span class="line-number">121</span>
<span class="line-number">122</span>
<span class="line-number">123</span>
<span class="line-number">124</span>
<span class="line-number">125</span>
<span class="line-number">126</span>
<span class="line-number">127</span>
<span class="line-number">128</span>
<span class="line-number">129</span>
<span class="line-number">130</span>
<span class="line-number">131</span>
<span class="line-number">132</span>
<span class="line-number">133</span>
<span class="line-number">134</span>
<span class="line-number">135</span>
</pre></td><td class="code"><pre><code class="rb"><span class="line"><span class="c1">#!/usr/bin/env ruby</span>
</span><span class="line"><span class="c1"># kate: remove-trailing-space on; replace-trailing-space-save on; indent-width 2; indent-mode ruby; syntax ruby;</span>
</span><span class="line"><span class="c1"># file: pastie.rb</span>
</span><span class="line">
</span><span class="line"><span class="nb">require</span> <span class="s1">&#39;net/http&#39;</span>
</span><span class="line"><span class="nb">require</span> <span class="s1">&#39;optparse&#39;</span>
</span><span class="line"><span class="nb">require</span> <span class="s1">&#39;timeout&#39;</span>
</span><span class="line"><span class="nb">require</span> <span class="s1">&#39;cgi&#39;</span>
</span><span class="line"><span class="nb">require</span> <span class="s1">&#39;uri&#39;</span>
</span><span class="line">
</span><span class="line"><span class="k">class</span> <span class="nc">Hash</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">to_query_string</span>
</span><span class="line">    <span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">k</span><span class="p">,</span> <span class="n">v</span><span class="o">|</span>
</span><span class="line">      <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">instance_of?</span><span class="p">(</span><span class="no">Hash</span><span class="p">)</span>
</span><span class="line">        <span class="n">v</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">sk</span><span class="p">,</span> <span class="n">sv</span><span class="o">|</span>
</span><span class="line">          <span class="s2">&quot;</span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">[</span><span class="si">#{</span><span class="n">sk</span><span class="si">}</span><span class="s2">]=</span><span class="si">#{</span><span class="n">sv</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class="line">        <span class="p">}</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">)</span>
</span><span class="line">      <span class="k">else</span>
</span><span class="line">        <span class="s2">&quot;</span><span class="si">#{</span><span class="n">k</span><span class="si">}</span><span class="s2">=</span><span class="si">#{</span><span class="n">v</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class="line">      <span class="k">end</span>
</span><span class="line">    <span class="p">}</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;&amp;&#39;</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">module</span> <span class="nn">Pastie</span>
</span><span class="line">
</span><span class="line">  <span class="no">AVAILABLE_PARSERS</span> <span class="o">=</span> <span class="sx">%w( objective-c++ actionscript ruby ruby_on_rails diff</span>
</span><span class="line"><span class="sx">    plain_text c++ css java javascript html html_rails shell shell-unix-generic</span>
</span><span class="line"><span class="sx">    sql php python pascal perl yaml csharp go apache lua io lisp d erlang fortran</span>
</span><span class="line"><span class="sx">    haskell literate_haskell makefile scala scheme smarty ini nu tex clojure</span>
</span><span class="line"><span class="sx">  )</span>
</span><span class="line">
</span><span class="line">  <span class="k">class</span> <span class="nc">API</span>
</span><span class="line">
</span><span class="line">    <span class="no">PASTIE_URL</span> <span class="o">=</span> <span class="no">URI</span><span class="o">.</span><span class="n">parse</span> <span class="s2">&quot;http://pastie.org/pastes&quot;</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">paste</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="nb">format</span> <span class="o">=</span> <span class="s1">&#39;plain_text&#39;</span><span class="p">,</span> <span class="n">is_private</span> <span class="o">=</span> <span class="kp">false</span><span class="p">)</span>
</span><span class="line">      <span class="k">raise</span> <span class="no">InvalidParser</span> <span class="k">unless</span> <span class="n">valid_parser?</span> <span class="nb">format</span>
</span><span class="line">
</span><span class="line">      <span class="n">http</span> <span class="o">=</span> <span class="ss">Net</span><span class="p">:</span><span class="ss">:HTTP</span><span class="o">.</span><span class="n">new</span> <span class="no">PASTIE_URL</span><span class="o">.</span><span class="n">host</span><span class="p">,</span> <span class="no">PASTIE_URL</span><span class="o">.</span><span class="n">port</span>
</span><span class="line">
</span><span class="line">      <span class="n">query_string</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:paste</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="line">        <span class="ss">:body</span> <span class="o">=&gt;</span> <span class="no">CGI</span><span class="o">.</span><span class="n">escape</span><span class="p">(</span><span class="n">body</span><span class="p">),</span>
</span><span class="line">        <span class="ss">:parser</span> <span class="o">=&gt;</span> <span class="nb">format</span><span class="p">,</span>
</span><span class="line">        <span class="ss">:restricted</span> <span class="o">=&gt;</span> <span class="n">is_private</span><span class="p">,</span>
</span><span class="line">        <span class="ss">:authorization</span> <span class="o">=&gt;</span> <span class="s1">&#39;burger&#39;</span>
</span><span class="line">      <span class="p">}}</span><span class="o">.</span><span class="n">to_query_string</span>
</span><span class="line">
</span><span class="line">      <span class="n">response</span><span class="p">,</span> <span class="n">body</span> <span class="o">=</span> <span class="n">http</span><span class="o">.</span><span class="n">start</span> <span class="k">do</span> <span class="o">|</span><span class="n">http</span><span class="o">|</span>
</span><span class="line">        <span class="n">http</span><span class="o">.</span><span class="n">post</span> <span class="no">PASTIE_URL</span><span class="o">.</span><span class="n">path</span><span class="p">,</span> <span class="n">query_string</span>
</span><span class="line">      <span class="k">end</span>
</span><span class="line">
</span><span class="line">      <span class="k">raise</span> <span class="ss">Pastie</span><span class="p">:</span><span class="ss">:Error</span> <span class="k">unless</span> <span class="n">response</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="s1">&#39;302&#39;</span>
</span><span class="line">
</span><span class="line">      <span class="n">response</span><span class="o">[</span><span class="s1">&#39;location&#39;</span><span class="o">]</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">
</span><span class="line">    <span class="kp">private</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">valid_parser?</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>
</span><span class="line">      <span class="ss">Pastie</span><span class="p">:</span><span class="ss">:AVAILABLE_PARSERS</span><span class="o">.</span><span class="n">include?</span> <span class="nb">format</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">class</span> <span class="nc">Error</span> <span class="o">&lt;</span> <span class="no">StandardError</span><span class="p">;</span> <span class="k">end</span>
</span><span class="line">  <span class="k">class</span> <span class="nc">InvalidParser</span> <span class="o">&lt;</span> <span class="no">StandardError</span><span class="p">;</span> <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">class</span> <span class="nc">ConsoleOptions</span>
</span><span class="line">
</span><span class="line">    <span class="kp">attr_reader</span> <span class="ss">:parser</span><span class="p">,</span> <span class="ss">:options</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">initialize</span>
</span><span class="line">      <span class="vi">@options</span> <span class="o">=</span> <span class="p">{</span>
</span><span class="line">        <span class="ss">:format</span> <span class="o">=&gt;</span> <span class="s1">&#39;plain_text&#39;</span><span class="p">,</span>
</span><span class="line">        <span class="ss">:private</span> <span class="o">=&gt;</span> <span class="kp">false</span>
</span><span class="line">      <span class="p">}</span>
</span><span class="line">
</span><span class="line">      <span class="vi">@parser</span> <span class="o">=</span> <span class="no">OptionParser</span><span class="o">.</span><span class="n">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">cmd</span><span class="o">|</span>
</span><span class="line">        <span class="n">cmd</span><span class="o">.</span><span class="n">banner</span> <span class="o">=</span> <span class="s2">&quot;Ruby Pastie CLI - takes paste input from STDIN&quot;</span>
</span><span class="line">
</span><span class="line">        <span class="n">cmd</span><span class="o">.</span><span class="n">separator</span> <span class="s1">&#39;&#39;</span>
</span><span class="line">
</span><span class="line">        <span class="n">cmd</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;-h&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">,</span> <span class="s1">&#39;Displays this help message&#39;</span><span class="p">)</span> <span class="k">do</span>
</span><span class="line">          <span class="nb">puts</span> <span class="vi">@parser</span>
</span><span class="line">          <span class="nb">exit</span>
</span><span class="line">        <span class="k">end</span>
</span><span class="line">
</span><span class="line">        <span class="n">cmd</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="s1">&#39;--format FORMAT&#39;</span><span class="p">,</span> <span class="s2">&quot;The format of the text being pasted. Available parsers: </span><span class="si">#{</span><span class="ss">Pastie</span><span class="p">:</span><span class="ss">:AVAILABLE_PARSERS</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;, &#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
</span><span class="line">          <span class="vi">@options</span><span class="o">[</span><span class="ss">:format</span><span class="o">]</span> <span class="o">=</span> <span class="nb">format</span>
</span><span class="line">        <span class="k">end</span>
</span><span class="line">
</span><span class="line">        <span class="n">cmd</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s1">&#39;-p&#39;</span><span class="p">,</span> <span class="s1">&#39;--private&#39;</span><span class="p">,</span> <span class="s1">&#39;Create a private paste&#39;</span><span class="p">)</span> <span class="k">do</span>
</span><span class="line">          <span class="vi">@options</span><span class="o">[</span><span class="ss">:private</span><span class="o">]</span> <span class="o">=</span> <span class="kp">true</span>
</span><span class="line">        <span class="k">end</span>
</span><span class="line">      <span class="k">end</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">run</span> <span class="n">arguments</span>
</span><span class="line">      <span class="vi">@parser</span><span class="o">.</span><span class="n">parse!</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">      <span class="n">body</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span><span class="line">
</span><span class="line">      <span class="no">Timeout</span><span class="o">.</span><span class="n">timeout</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="k">do</span>
</span><span class="line">        <span class="n">body</span> <span class="o">+=</span> <span class="no">STDIN</span><span class="o">.</span><span class="n">read</span>
</span><span class="line">      <span class="k">end</span>
</span><span class="line">
</span><span class="line">      <span class="k">if</span> <span class="n">body</span><span class="o">.</span><span class="n">strip</span><span class="o">.</span><span class="n">empty?</span>
</span><span class="line">        <span class="nb">puts</span> <span class="s2">&quot;Please pipe in some content to paste on STDIN.&quot;</span>
</span><span class="line">        <span class="nb">exit</span> <span class="mi">1</span>
</span><span class="line">      <span class="k">end</span>
</span><span class="line">
</span><span class="line">      <span class="n">pastie</span> <span class="o">=</span> <span class="no">API</span><span class="o">.</span><span class="n">new</span>
</span><span class="line">      <span class="nb">puts</span> <span class="n">pastie</span><span class="o">.</span><span class="n">paste</span><span class="p">(</span><span class="n">body</span><span class="p">,</span> <span class="vi">@options</span><span class="o">[</span><span class="ss">:format</span><span class="o">]</span><span class="p">,</span> <span class="vi">@options</span><span class="o">[</span><span class="ss">:private</span><span class="o">]</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">      <span class="nb">exit</span> <span class="mi">0</span>
</span><span class="line">    <span class="k">rescue</span> <span class="no">InvalidParser</span>
</span><span class="line">      <span class="nb">puts</span> <span class="s2">&quot;Please specify a valid format parser.&quot;</span>
</span><span class="line">      <span class="nb">exit</span> <span class="mi">1</span>
</span><span class="line">    <span class="k">rescue</span> <span class="no">Error</span>
</span><span class="line">      <span class="nb">puts</span> <span class="s2">&quot;An unknown error occurred&quot;</span>
</span><span class="line">      <span class="nb">exit</span> <span class="mi">1</span>
</span><span class="line">    <span class="k">rescue</span> <span class="ss">Timeout</span><span class="p">:</span><span class="ss">:Error</span>
</span><span class="line">      <span class="nb">puts</span> <span class="s2">&quot;Could not read from STDIN.&quot;</span>
</span><span class="line">      <span class="nb">exit</span> <span class="mi">1</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">if</span> <span class="p">(</span><span class="vg">$0</span> <span class="o">==</span> <span class="bp">__FILE__</span><span class="p">)</span>
</span><span class="line">  <span class="n">app</span> <span class="o">=</span> <span class="ss">Pastie</span><span class="p">:</span><span class="ss">:ConsoleOptions</span><span class="o">.</span><span class="n">new</span>
</span><span class="line">  <span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="no">ARGV</span><span class="p">)</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/16/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/14/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/07/10/antigua-guatemala/">Antigua Guatemala</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/06/zur-allgemeinen-lage-der-sicherheit/">Zur Allgemeinen Lage der Sicherheit</a>
      </li>
    
      <li class="post">
        <a href="/2013/07/04/costa-rica-nicaragua-honduras/">Costa Rica, Nicaragua, Honduras</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/19/oh-wie-cool-ist-panama/">Oh, Wie Cool Ist Panama</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/16/2-wochen-in-miami/">2 Wochen in Miami</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
   
  <a class="twitter-timeline" height="300" href="https://twitter.com/salout_de"  data-widget-id="321125269626814464">Tweets von @salout_de</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>


<section>
  <h1>Recent Comments</h1>
  <div id="dsq-recentcomments" class="dsq-widget"><script type="text/javascript" src="http://disqus.com/forums/worthmentioning/recent_comments_widget.js?hide_avatars=1&amp;excerpt_length=100"></script></div>
</section><section>
  <h1>Affiliated With</h1>
  <a href="http://www.kde.org" title="go to KDE"><img src="/images/kde-button.png" class="noborder" alt="KDE"/></a>
  <a href="http://www.opensuse.org" title="go to openSUSE"><img src="/images/opensuse-button.png" class="noborder" alt="openSUSE"/></a>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Robert Riemann |
  <span class="credit">
    Powered by <a href="http://octopress.org">Octopress</a> |
    Hosted by <a href='http://github.com/saLOUt/saLOUt.github.com/'>GitHub</a> |
    Generated by <a href='http://github.com/mojombo/jekyll'>Jekyll</a> on 11.07.13 at 00:13
  </span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'worthmentioning';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
