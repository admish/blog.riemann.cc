
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Worth Mentioning</title>
  <meta name="author" content="Robert Riemann">

  
  <meta name="description" content="I really wonder why there are no Konqueror related idea for a GSoC 2010 project
in the KDE Community Wiki. The last opensuse version ships Firefox as &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://blog.riemann.cc/page/15">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="http://blog.riemann.cc/atom.xml" rel="alternate" title="Worth Mentioning" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=Droid+Sans|Droid+Serif:400,700,700italic|Droid+Sans+Mono' rel='stylesheet' type='text/css'>


<link rel="stylesheet" href="/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5" type="text/css" media="screen" />
<link rel="stylesheet" href="/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7" type="text/css" media="screen" />

<script type="text/javascript" src="/fancybox/lib/jquery.mousewheel-3.0.6.pack.js"></script>
<script type="text/javascript" src="/fancybox/jquery.fancybox.pack.js?v=2.1.4"></script>
<script type="text/javascript" src="/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="/fancybox/helpers/jquery.fancybox-media.js?v=1.0.5"></script>
<script type="text/javascript" src="/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-12737249-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  
  <h1><a href="/">Worth Mentioning</a></h1>
  
    <h2>nothing else</h2>
  
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://blog.riemann.cc/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:blog.riemann.cc" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="http://github.com/saLOUt">Code</a></li>
  <li><a href="http://www.flickr.com/photos/27621704@N07/">Photos</a></li>
<!--   <li><a href="http://www.lastfm.de/user/saLOUt">Music</a></li> -->
  <li><a href="http://www.facebook.com/rriemann">Facebook</a></li>
  <li><a href="http://www.couchsurfing.org/people/salout">Couchsurfing</a></li>
  <li><a href="http://people.physik.hu-berlin.de/~rriemann/">Files</a></li>
  <li><a href="/about/">About</a></li>
</ul>
</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/02/23/GSoC_konqueror_projects/">Call for Konqueror Related GSoC 2010 Projects</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-23T00:00:00-05:00" pubdate data-updated="true">Feb 23<span>rd</span>, 2010</time>
        
         | <a href="/2010/02/23/GSoC_konqueror_projects/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I really wonder why there are no Konqueror related idea for a GSoC 2010 project
in the <a href="http://community.kde.org/GSoC/2010/Ideas">KDE Community Wiki</a>.</p>

<p>The last opensuse version ships Firefox as default browser, there are some other
attempts of a kde based browser (rekonq, etc.), but I think that nothing can
replace Konqueror in the next time concerning  consumption of resources.
Konqueror is so fast using pdf viewer KPart Okular while Firefox almost hangs up
with <em>proprietary</em> plugin adobe reader. Which other browser can split its view
and show pdf viewer and webpages at the same time? KatePart is also very handy.</p>

<p>I mean it’s wrong to think that other Qt based browsers can replace Konqueror in
the next time. Even the inexperienced user wants to use KPart Okular.</p>

<p>However, I use Firefox, because it doesn’t use kthml has awesome bookmark tagging
and can be synced with Mozilla Weave. It would be nice to see these features
prospectively integrated in Konqueror, too.</p>

<p>What do you think? Can we bring Konqueror to the next level?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/02/19/konsolepart_and_ruby/">Add a Full-featured Shell to Your GUI (With Ruby)</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-19T00:00:00-05:00" pubdate data-updated="true">Feb 19<span>th</span>, 2010</time>
        
         | <a href="/2010/02/19/konsolepart_and_ruby/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="konsolepart">KonsolePart</h2>

<p><img src="http://blog.riemann.cc/images/konsolepart_ruby_demo.png" alt="GUI integrating KDE libkonsolepart" title="GUI integrating KonsolePart" class="right" />
To get a shell in your GUI, you don’t have to reinvent the wheel - just use
the KonsolePart provided by KDE KParts. If you use the <a href="http://kde.org/">KDE</a> environment
you already know the libkonsolepart, because Dolphin, Konqueror, Kate, Yakuake,
etc. take usage of it.</p>

<p>To get this small demo run, you need a KDE version already containing SVN
commit 1085699 (ttanks no Arno, who made the Part accessable within ruby).
The opensuse buildservice should provide a package <code>ruby-kde4</code> in Factory Repo,
but I build I didn’t test it.</p>

<p>Just copy both files in the same directory, make the main.rb executable and run it.</p>

<p>The example contains a little bit more than neccessary, because it implements
a fully customizable menus/toolbars via KXmlWindow and shows how to use
actions and slots.</p>

<p>To get only the KonsolePart widget, you only have to look at the KonsolePart
class. The class itself bases on a short code example from Arno. Kudos to him!</p>

<p>For further explanation just take a look
at the source code.</p>

<h2 id="usage">Usage</h2>

<p>You can change the working directory for the built-in shell
by a nice dialog and can execute some command by the lineedit. To send your command
to the shell, you have to press enter.</p>

<p>I know there are a lot of bugs. <code>;)</code> But it is just a quick and dirty demo.</p>

<h2 id="mainrb">main.rb</h2>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>main.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
<span class="line-number">45</span>
<span class="line-number">46</span>
<span class="line-number">47</span>
<span class="line-number">48</span>
<span class="line-number">49</span>
<span class="line-number">50</span>
<span class="line-number">51</span>
<span class="line-number">52</span>
<span class="line-number">53</span>
<span class="line-number">54</span>
<span class="line-number">55</span>
<span class="line-number">56</span>
<span class="line-number">57</span>
<span class="line-number">58</span>
<span class="line-number">59</span>
<span class="line-number">60</span>
<span class="line-number">61</span>
<span class="line-number">62</span>
<span class="line-number">63</span>
<span class="line-number">64</span>
<span class="line-number">65</span>
<span class="line-number">66</span>
<span class="line-number">67</span>
<span class="line-number">68</span>
<span class="line-number">69</span>
<span class="line-number">70</span>
<span class="line-number">71</span>
<span class="line-number">72</span>
<span class="line-number">73</span>
<span class="line-number">74</span>
<span class="line-number">75</span>
<span class="line-number">76</span>
<span class="line-number">77</span>
<span class="line-number">78</span>
<span class="line-number">79</span>
<span class="line-number">80</span>
<span class="line-number">81</span>
<span class="line-number">82</span>
<span class="line-number">83</span>
<span class="line-number">84</span>
<span class="line-number">85</span>
<span class="line-number">86</span>
<span class="line-number">87</span>
<span class="line-number">88</span>
<span class="line-number">89</span>
<span class="line-number">90</span>
<span class="line-number">91</span>
<span class="line-number">92</span>
<span class="line-number">93</span>
<span class="line-number">94</span>
<span class="line-number">95</span>
<span class="line-number">96</span>
<span class="line-number">97</span>
<span class="line-number">98</span>
<span class="line-number">99</span>
<span class="line-number">100</span>
<span class="line-number">101</span>
<span class="line-number">102</span>
<span class="line-number">103</span>
<span class="line-number">104</span>
<span class="line-number">105</span>
<span class="line-number">106</span>
</pre></td><td class="code"><pre><code class="rb"><span class="line"><span class="c1">#!/usr/bin/env ruby</span>
</span><span class="line">
</span><span class="line"><span class="vg">$KCODE</span> <span class="o">=</span> <span class="s1">&#39;u&#39;</span>
</span><span class="line">
</span><span class="line"><span class="nb">require</span> <span class="s1">&#39;korundum4&#39;</span>
</span><span class="line">
</span><span class="line"><span class="k">class</span> <span class="nc">KonsolePart</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span> <span class="n">parent</span>
</span><span class="line">
</span><span class="line">    <span class="n">factory</span> <span class="o">=</span> <span class="ss">KDE</span><span class="p">:</span><span class="ss">:PluginLoader</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;libkonsolepart&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">factory</span>
</span><span class="line">    <span class="vi">@part</span> <span class="o">=</span> <span class="n">factory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="s2">&quot;KParts::ReadOnlyPart&quot;</span><span class="p">,</span> <span class="n">parent</span><span class="p">,</span> <span class="kp">nil</span><span class="p">,</span> <span class="o">[]</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="vi">@terminal</span> <span class="o">=</span> <span class="vi">@part</span><span class="o">.</span><span class="n">qobject_cast</span><span class="p">(</span><span class="ss">KDE</span><span class="p">:</span><span class="ss">:TerminalInterfaceV2</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="k">if</span> <span class="vi">@terminal</span><span class="o">.</span><span class="n">nil?</span>
</span><span class="line">      <span class="vi">@terminal</span> <span class="o">=</span> <span class="vi">@part</span><span class="o">.</span><span class="n">qobject_cast</span><span class="p">(</span><span class="ss">KDE</span><span class="p">:</span><span class="ss">:TerminalInterface</span><span class="p">)</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">    <span class="n">pwd</span>
</span><span class="line">
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="kp">public</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">widget</span>
</span><span class="line">    <span class="vi">@part</span><span class="o">.</span><span class="n">widget</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="c1"># http://api.kde.org/4.3-api/kdebase-apps-apidocs/konsole/html/Part_8h_source.html</span>
</span><span class="line">  <span class="k">def</span> <span class="nf">pwd</span> <span class="n">path</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span>
</span><span class="line">    <span class="vi">@terminal</span><span class="o">.</span><span class="n">show_shell_in_dir</span> <span class="n">path</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">cmd</span> <span class="n">input</span>
</span><span class="line">    <span class="vi">@terminal</span><span class="o">.</span><span class="n">send_input</span> <span class="n">input</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">class</span> <span class="nc">CustomWidget</span> <span class="o">&lt;</span> <span class="ss">KDE</span><span class="p">:</span><span class="ss">:XmlGuiWindow</span>
</span><span class="line">
</span><span class="line">  <span class="n">slots</span> <span class="ss">:changedir</span><span class="p">,</span> <span class="ss">:docmd</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span> <span class="n">parent</span> <span class="o">=</span> <span class="kp">nil</span> <span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="k">super</span>
</span><span class="line">
</span><span class="line">    <span class="n">resize</span><span class="p">(</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">600</span> <span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="c1">##### Prepare Central Widget</span>
</span><span class="line">    <span class="vi">@centralwidget</span> <span class="o">=</span> <span class="ss">Qt</span><span class="p">:</span><span class="ss">:Widget</span><span class="o">.</span><span class="n">new</span> <span class="nb">self</span>
</span><span class="line">    <span class="n">setCentralWidget</span> <span class="vi">@centralwidget</span>
</span><span class="line">
</span><span class="line">    <span class="c1">#### Build window layout</span>
</span><span class="line">    <span class="vi">@centralWidgetVLayout</span> <span class="o">=</span> <span class="ss">Qt</span><span class="p">:</span><span class="ss">:VBoxLayout</span><span class="o">.</span><span class="n">new</span> <span class="vi">@centralwidget</span>
</span><span class="line">
</span><span class="line">    <span class="vi">@kPBtnChangePwd</span> <span class="o">=</span> <span class="ss">KDE</span><span class="p">:</span><span class="ss">:PushButton</span><span class="o">.</span><span class="n">new</span> <span class="vi">@centralwidget</span>
</span><span class="line">    <span class="vi">@kPBtnChangePwd</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span> <span class="ss">:clicked</span><span class="p">,</span> <span class="nb">self</span><span class="p">,</span> <span class="ss">:changedir</span><span class="p">)</span>
</span><span class="line">    <span class="vi">@centralWidgetVLayout</span><span class="o">.</span><span class="n">addWidget</span> <span class="vi">@kPBtnChangePwd</span>
</span><span class="line">    <span class="vi">@kLineEdt</span> <span class="o">=</span> <span class="ss">KDE</span><span class="p">:</span><span class="ss">:LineEdit</span><span class="o">.</span><span class="n">new</span> <span class="vi">@centralwidget</span>
</span><span class="line">    <span class="vi">@kLineEdt</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span> <span class="ss">:returnPressed</span><span class="p">,</span> <span class="nb">self</span><span class="p">,</span> <span class="ss">:docmd</span> <span class="p">)</span>
</span><span class="line">    <span class="vi">@centralWidgetVLayout</span><span class="o">.</span><span class="n">addWidget</span> <span class="vi">@kLineEdt</span>
</span><span class="line">    <span class="vi">@centralWidgetVLayout</span><span class="o">.</span><span class="n">add_stretch</span>
</span><span class="line">
</span><span class="line">    <span class="c1">##### Build Konsole Panel</span>
</span><span class="line">    <span class="vi">@konsoleDockWidget</span> <span class="o">=</span> <span class="ss">Qt</span><span class="p">:</span><span class="ss">:DockWidget</span><span class="o">.</span><span class="n">new</span> <span class="nb">self</span>
</span><span class="line">    <span class="vi">@konsoleDockWidget</span><span class="o">.</span><span class="n">objectName</span> <span class="o">=</span> <span class="s2">&quot;konsoleDockWidget&quot;</span>
</span><span class="line">    <span class="vi">@konsoleDockWidget</span><span class="o">.</span><span class="n">features</span> <span class="o">=</span> <span class="ss">Qt</span><span class="p">:</span><span class="ss">:DockWidget</span><span class="o">::</span><span class="no">AllDockWidgetFeatures</span>
</span><span class="line">    <span class="vi">@mykonsole</span> <span class="o">=</span> <span class="no">KonsolePart</span><span class="o">.</span><span class="n">new</span> <span class="vi">@konsoleDockWidget</span>
</span><span class="line">    <span class="vi">@konsoleDockWidget</span><span class="o">.</span><span class="n">setWidget</span> <span class="vi">@mykonsole</span><span class="o">.</span><span class="n">widget</span>
</span><span class="line">    <span class="n">addDockWidget</span> <span class="ss">Qt</span><span class="p">:</span><span class="ss">:BottomDockWidgetArea</span><span class="p">,</span> <span class="vi">@konsoleDockWidget</span>
</span><span class="line">
</span><span class="line">    <span class="c1">##### Prepare actions</span>
</span><span class="line">    <span class="vi">@closeAction</span> <span class="o">=</span> <span class="ss">KDE</span><span class="p">:</span><span class="ss">:StandardAction</span><span class="o">::</span><span class="n">quit</span><span class="p">(</span> <span class="nb">self</span><span class="p">,</span> <span class="no">SLOT</span><span class="p">(</span> <span class="ss">:close</span> <span class="p">),</span> <span class="n">actionCollection</span> <span class="p">)</span>
</span><span class="line">    <span class="n">actionCollection</span><span class="o">.</span><span class="n">addAction</span> <span class="s2">&quot;toggle_konsole&quot;</span><span class="p">,</span> <span class="vi">@konsoleDockWidget</span><span class="o">.</span><span class="n">toggleViewAction</span>
</span><span class="line">
</span><span class="line">    <span class="c1">##### Prepare GUI</span>
</span><span class="line">    <span class="n">setupGUI</span><span class="p">(</span> <span class="no">Default</span><span class="p">,</span> <span class="no">File</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span> <span class="bp">__FILE__</span> <span class="p">)</span> <span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/ui.rc&quot;</span> <span class="p">)</span>
</span><span class="line">    <span class="n">retranslate_ui</span>
</span><span class="line">
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">changedir</span>
</span><span class="line">    <span class="n">folder</span> <span class="o">=</span> <span class="sx">%x{ kdialog --getexistingdirectory . }</span>
</span><span class="line">    <span class="vi">@mykonsole</span><span class="o">.</span><span class="n">cmd</span> <span class="s2">&quot;cd </span><span class="si">#{</span><span class="n">folder</span><span class="si">}</span><span class="s2">&quot;</span> <span class="k">unless</span> <span class="n">folder</span><span class="o">.</span><span class="n">nil?</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">docmd</span>
</span><span class="line">    <span class="vi">@mykonsole</span><span class="o">.</span><span class="n">cmd</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="vi">@kLineEdt</span><span class="o">.</span><span class="n">text</span><span class="si">}</span><span class="se">\n</span><span class="s2">&quot;</span>
</span><span class="line">    <span class="vi">@kLineEdt</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">retranslate_ui</span>
</span><span class="line">    <span class="n">setWindowTitle</span> <span class="n">i18n</span> <span class="s2">&quot;KPlaylistTool&quot;</span>
</span><span class="line">    <span class="vi">@konsoleDockWidget</span><span class="o">.</span><span class="n">setWindowTitle</span> <span class="n">i18n</span> <span class="s2">&quot;Konsole&quot;</span>
</span><span class="line">    <span class="vi">@kPBtnChangePwd</span><span class="o">.</span><span class="n">setText</span> <span class="n">i18n</span> <span class="s2">&quot;Change Directory&quot;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="n">about</span> <span class="o">=</span> <span class="ss">KDE</span><span class="p">:</span><span class="ss">:AboutData</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;konsoleinruby&quot;</span><span class="p">,</span> <span class="s2">&quot;konqueror&quot;</span><span class="p">,</span> <span class="no">KDE</span><span class="o">.</span><span class="n">ki18n</span><span class="p">(</span><span class="s2">&quot;Konsole in Ruby&quot;</span><span class="p">),</span> <span class="s2">&quot;0.1&quot;</span><span class="p">,</span> <span class="ss">KDE</span><span class="p">:</span><span class="ss">:ki18n</span><span class="p">(</span><span class="s2">&quot;A short description&quot;</span><span class="p">),</span> <span class="ss">KDE</span><span class="p">:</span><span class="ss">:AboutData</span><span class="o">::</span><span class="no">License_GPL_V3</span><span class="p">,</span> <span class="ss">KDE</span><span class="p">:</span><span class="ss">:ki18n</span><span class="p">(</span><span class="s2">&quot;© 2010 Robert Riemann&quot;</span><span class="p">),</span> <span class="ss">KDE</span><span class="p">:</span><span class="ss">:ki18n</span><span class="p">(</span><span class="s2">&quot;See kde-apps.org for Updates&quot;</span><span class="p">),</span> <span class="s2">&quot;http://homepage.de&quot;</span><span class="p">,</span> <span class="s2">&quot;bugs@homepage.de&quot;</span> <span class="p">)</span>
</span><span class="line"><span class="n">about</span><span class="o">.</span><span class="n">setProgramIconName</span>  <span class="s2">&quot;plasma&quot;</span>
</span><span class="line"><span class="ss">KDE</span><span class="p">:</span><span class="ss">:CmdLineArgs</span><span class="o">.</span><span class="n">init</span><span class="p">(</span><span class="no">ARGV</span><span class="p">,</span> <span class="n">about</span><span class="p">)</span>
</span><span class="line"><span class="n">a</span> <span class="o">=</span> <span class="ss">KDE</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">new</span>
</span><span class="line"><span class="n">w</span> <span class="o">=</span> <span class="no">CustomWidget</span><span class="o">.</span><span class="n">new</span>
</span><span class="line"><span class="n">w</span><span class="o">.</span><span class="n">show</span>
</span><span class="line"><span class="n">a</span><span class="o">.</span><span class="n">exec</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h2 id="uixml">ui.xml</h2>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>ui.xml </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
</pre></td><td class="code"><pre><code class="xml"><span class="line"><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
</span><span class="line"><span class="nt">&lt;gui</span> <span class="na">name=</span><span class="s">&quot;konsole_in_ruby&quot;</span><span class="nt">&gt;</span>
</span><span class="line">     version=&quot;1&quot;
</span><span class="line">     xmlns=&quot;http://www.kde.org/standards/kxmlgui/1.0&quot;
</span><span class="line">     xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span><span class="line">     xsi:schemaLocation=&quot;http://www.kde.org/standards/kxmlgui/1.0
</span><span class="line">                         http://www.kde.org/standards/kxmlgui/1.0/kxmlgui.xsd&quot; &gt;
</span><span class="line">  <span class="nt">&lt;MenuBar&gt;</span>
</span><span class="line">    <span class="nt">&lt;Menu</span> <span class="na">name=</span><span class="s">&quot;file&quot;</span> <span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;/Menu&gt;</span>
</span><span class="line">    <span class="nt">&lt;Menu</span> <span class="na">name=</span><span class="s">&quot;view&quot;</span> <span class="nt">&gt;</span>
</span><span class="line">      <span class="nt">&lt;Action</span> <span class="na">name=</span><span class="s">&quot;toggle_konsole&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">    <span class="nt">&lt;/Menu&gt;</span>
</span><span class="line">  <span class="nt">&lt;/MenuBar&gt;</span>
</span><span class="line">  <span class="nt">&lt;ToolBar</span> <span class="na">name=</span><span class="s">&quot;mainToolBar&quot;</span> <span class="nt">&gt;</span>
</span><span class="line">    <span class="nt">&lt;text&gt;</span>Main Toolbar<span class="nt">&lt;/text&gt;</span>
</span><span class="line">    <span class="nt">&lt;Action</span> <span class="na">name=</span><span class="s">&quot;toggle_konsole&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">    <span class="nt">&lt;Action</span> <span class="na">name=</span><span class="s">&quot;file_quit&quot;</span> <span class="nt">/&gt;</span>
</span><span class="line">  <span class="nt">&lt;/ToolBar&gt;</span>
</span><span class="line"><span class="nt">&lt;/gui&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2010/02/07/simple_ruby_plasmoid/">Simple Ruby Plasmoid</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-02-07T00:00:00-05:00" pubdate data-updated="true">Feb 7<span>th</span>, 2010</time>
        
         | <a href="/2010/02/07/simple_ruby_plasmoid/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="hello-planet-kde-hello-rubycorner">Hello Planet KDE, hello RubyCorner</h2>

<p>After some blog posts on my old blog about KDE programming with Ruby
I decided to bring the content a little bit more to the people. Here I am.</p>

<p>Two days before yesterday I got a mail concerning a problem related to creating
plasmoids with Ruby. I never had the wish to create my own plasmoid. I thought
it would be difficult, but while getting a closer look, I’ve noticed how easy it
is - in the case of using Ruby.</p>

<h2 id="simple-ruby-plasmoid">Simple Ruby Plasmoid</h2>

<p><img src="http://blog.riemann.cc/images/simple_ruby_plasmoid_clipboard.png" alt="Simple Plasmoid made with Ruby" title="Simple Plasmoid made with Ruby" class="right" />
This example is a modified version from the one in the <a href="http://techbase.kde.org/Development/Tutorials/Plasma/Ruby/SimplePasteApplet" title="Tutorial on KDE Techbase Wiki">KDE techbase wiki</a>.</p>

<p>The plasmoid sends the content of a <em>QLineEdit</em> to the clipboard when pressing the
<em>QPushButton</em> or pressing the enter key and clears the <em>QLineEdit</em> afterwards.</p>

<h2 id="test-it">Test It</h2>

<p>If you want to try it yourself, you just have to extract
<a href="http://blog.riemann.cc/files/simple_ruby_plasmoid_clipboard.tar.gz">simple_ruby_plasmoid_clipboard.tar.gz</a>, change the directory to
<em>ruby-test-applet</em> and start the plasmoid in a special viewer with
<code>plasmoidviewer</code>.</p>

<p>You have to install the Ruby KDE bindings package (on opensuse it is called
ruby-kde4), but on a lot of KDE4 systems this should be installed already.</p>

<h2 id="understand-it">Understand It</h2>

<p>First you need the right directory tree for your plasmoid. It should be look
like this:</p>

<pre><code>ruby-test-applet/
|-- contents
|   `-- code
|       `-- main.rb
`-- metadata.desktop
</code></pre>

<p>You need at least two files. The first one is <em>main.rb</em>, that contains your
program code.</p>

<p>When accessing KDE libs from Ruby you write nearly the same code
as you would write in C++.</p>

<p>A short example in C++:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="c"><span class="line"><span class="n">setMinimumSize</span><span class="p">(</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">150</span> <span class="p">)</span>
</span><span class="line"><span class="n">Plasma</span><span class="o">::</span><span class="n">LineEdit</span> <span class="n">line_edit</span><span class="p">(</span> <span class="n">parent</span> <span class="p">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The same using Ruby:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="n">set_minimum_size</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">150</span>
</span><span class="line"><span class="c1"># or</span>
</span><span class="line"><span class="n">setMinimumSize</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">150</span>
</span><span class="line"><span class="c1"># or</span>
</span><span class="line"><span class="nb">self</span><span class="o">.</span><span class="n">minimum_size</span> <span class="o">=</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">150</span>
</span><span class="line"><span class="n">line_edit</span> <span class="ss">Plasma</span><span class="p">:</span><span class="ss">:LineEdit</span><span class="o">.</span><span class="n">new</span> <span class="nb">self</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Member variables begins with an @ sign. There are different aliases for KDE and
Qt methods. You can omit brackets in a lot of cases. You don’t need any header
files. You don’t need to compile.</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="nb">require</span> <span class="s1">&#39;plasma_applet&#39;</span>
</span><span class="line">
</span><span class="line"><span class="k">module</span> <span class="nn">RubyTestApplet</span>
</span><span class="line">  <span class="k">class</span> <span class="nc">Main</span> <span class="o">&lt;</span> <span class="ss">PlasmaScripting</span><span class="p">:</span><span class="ss">:Applet</span>
</span><span class="line">
</span><span class="line">    <span class="n">slots</span> <span class="ss">:addText</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">init</span>
</span><span class="line">      <span class="n">set_minimum_size</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">150</span>
</span><span class="line">
</span><span class="line">      <span class="vi">@layout</span> <span class="o">=</span> <span class="ss">Qt</span><span class="p">:</span><span class="ss">:GraphicsLinearLayout</span><span class="o">.</span><span class="n">new</span> <span class="ss">Qt</span><span class="p">:</span><span class="ss">:Vertical</span><span class="p">,</span> <span class="nb">self</span>
</span><span class="line">      <span class="nb">self</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="vi">@layout</span>
</span><span class="line">
</span><span class="line">      <span class="vi">@label</span> <span class="o">=</span> <span class="ss">Plasma</span><span class="p">:</span><span class="ss">:Label</span><span class="o">.</span><span class="n">new</span> <span class="nb">self</span>
</span><span class="line">      <span class="vi">@label</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;This plasmoid will copy the text you enter below to the clipboard.&#39;</span>
</span><span class="line">      <span class="vi">@layout</span><span class="o">.</span><span class="n">add_item</span> <span class="vi">@label</span>
</span><span class="line">
</span><span class="line">      <span class="vi">@line_edit</span> <span class="o">=</span> <span class="ss">Plasma</span><span class="p">:</span><span class="ss">:LineEdit</span><span class="o">.</span><span class="n">new</span> <span class="nb">self</span>
</span><span class="line">
</span><span class="line">      <span class="k">begin</span>
</span><span class="line">        <span class="vi">@line_edit</span><span class="o">.</span><span class="n">clear_button_shown</span> <span class="o">=</span> <span class="kp">true</span> <span class="c1"># not supported in early plasma versions</span>
</span><span class="line">      <span class="k">rescue</span>
</span><span class="line">        <span class="kp">nil</span> <span class="c1"># but that doesn&#39;t matter</span>
</span><span class="line">      <span class="k">end</span>
</span><span class="line">
</span><span class="line">      <span class="vi">@layout</span><span class="o">.</span><span class="n">add_item</span> <span class="vi">@line_edit</span>
</span><span class="line">
</span><span class="line">      <span class="vi">@button</span> <span class="o">=</span> <span class="ss">Plasma</span><span class="p">:</span><span class="ss">:PushButton</span><span class="o">.</span><span class="n">new</span> <span class="nb">self</span>
</span><span class="line">      <span class="vi">@button</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Copy to clipboard&#39;</span>
</span><span class="line">      <span class="vi">@layout</span><span class="o">.</span><span class="n">add_item</span> <span class="vi">@button</span>
</span><span class="line">
</span><span class="line">      <span class="ss">Qt</span><span class="p">:</span><span class="ss">:Object</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span> <span class="vi">@button</span><span class="p">,</span> <span class="no">SIGNAL</span><span class="p">(</span><span class="ss">:clicked</span><span class="p">),</span> <span class="nb">self</span><span class="p">,</span> <span class="no">SLOT</span><span class="p">(</span><span class="ss">:addText</span><span class="p">)</span> <span class="p">)</span>
</span><span class="line">      <span class="ss">Qt</span><span class="p">:</span><span class="ss">:Object</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span> <span class="vi">@line_edit</span><span class="p">,</span> <span class="no">SIGNAL</span><span class="p">(</span><span class="ss">:returnPressed</span><span class="p">),</span> <span class="nb">self</span><span class="p">,</span> <span class="no">SLOT</span><span class="p">(</span><span class="ss">:addText</span><span class="p">)</span> <span class="p">)</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">
</span><span class="line">    <span class="k">def</span> <span class="nf">addText</span>
</span><span class="line">      <span class="ss">Qt</span><span class="p">:</span><span class="ss">:Application</span><span class="o">.</span><span class="n">clipboard</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="vi">@line_edit</span><span class="o">.</span><span class="n">text</span>
</span><span class="line">      <span class="vi">@line_edit</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
</span><span class="line">    <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="c1"># kate: remove_trailing_space on; replace-trailing-space-save on; indent-width 2; indent-mode ruby;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>The second file you need is the <em>metadata.desktop</em> containing all the meta data. <code>;)</code></p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>metadata.desktop</span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
</pre></td><td class="code"><pre><code class="ini"><span class="line"><span class="k">[Desktop Entry]</span>
</span><span class="line"><span class="na">Name</span><span class="o">=</span><span class="s">Simple Ruby applet</span>
</span><span class="line"><span class="na">Comment</span><span class="o">=</span><span class="s">This is a simple applet written in Ruby</span>
</span><span class="line"><span class="na">Icon</span><span class="o">=</span><span class="s">chronometer</span>
</span><span class="line"><span class="na">Type</span><span class="o">=</span><span class="s">Service</span>
</span><span class="line"><span class="na">ServiceTypes</span><span class="o">=</span><span class="s">Plasma/Applet</span>
</span><span class="line">
</span><span class="line"><span class="na">X-Plasma-API</span><span class="o">=</span><span class="s">ruby-script</span>
</span><span class="line"><span class="na">X-Plasma-MainScript</span><span class="o">=</span><span class="s">code/main.rb</span>
</span><span class="line">
</span><span class="line"><span class="na">X-KDE-PluginInfo-Author</span><span class="o">=</span><span class="s">Me</span>
</span><span class="line"><span class="na">X-KDE-PluginInfo-Email</span><span class="o">=</span><span class="s">me@example.com</span>
</span><span class="line"><span class="na">X-KDE-PluginInfo-Name</span><span class="o">=</span><span class="s">ruby-test</span>
</span><span class="line"><span class="na">X-KDE-PluginInfo-Version</span><span class="o">=</span><span class="s">0.1</span>
</span><span class="line"><span class="na">X-KDE-PluginInfo-Website</span><span class="o">=</span><span class="s">http://plasma.kde.org/</span>
</span><span class="line"><span class="na">X-KDE-PluginInfo-Category</span><span class="o">=</span><span class="s">Examples</span>
</span><span class="line"><span class="na">X-KDE-PluginInfo-Depends</span><span class="o">=</span>
</span><span class="line"><span class="na">X-KDE-PluginInfo-License</span><span class="o">=</span><span class="s">GPL</span>
</span><span class="line"><span class="na">X-KDE-PluginInfo-EnabledByDefault</span><span class="o">=</span><span class="s">true</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>What do you think? So easy, isn’t it? If you have ever played a little
bit with Ruby and Qt or KDE you should know enough to create your own plasmoid
within a quarter of an hour!</p>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/16/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/14/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2013/06/19/oh-wie-cool-ist-panama/">Oh, Wie Cool Ist Panama</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/16/2-wochen-in-miami/">2 Wochen in Miami</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/09/tango_chor_konzerte_guadeloupe/">Tango, Chor und Konzerte in Guadeloupe</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/06/25-jahre-robert-aufbruch-zu-neuem/">25 Jahre Robert: Aufbruch zu Neuem</a>
      </li>
    
      <li class="post">
        <a href="/2013/06/04/das-karibische-meer-unterwasser/">Das Karibische Meer (Forts.): Unterwasser</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
   
  <a class="twitter-timeline" height="300" href="https://twitter.com/salout_de"  data-widget-id="321125269626814464">Tweets von @salout_de</a>
  <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</section>


<section>
  <h1>Recent Comments</h1>
  <div id="dsq-recentcomments" class="dsq-widget"><script type="text/javascript" src="http://disqus.com/forums/worthmentioning/recent_comments_widget.js?hide_avatars=1&amp;excerpt_length=100"></script></div>
</section><section>
  <h1>Affiliated With</h1>
  <a href="http://www.kde.org" title="go to KDE"><img src="/images/kde-button.png" class="noborder" alt="KDE"/></a>
  <a href="http://www.opensuse.org" title="go to openSUSE"><img src="/images/opensuse-button.png" class="noborder" alt="openSUSE"/></a>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Robert Riemann |
  <span class="credit">
    Powered by <a href="http://octopress.org">Octopress</a> |
    Hosted by <a href='http://github.com/saLOUt/saLOUt.github.com/'>GitHub</a> |
    Generated by <a href='http://github.com/mojombo/jekyll'>Jekyll</a> on 20.06.13 at 02:06
  </span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'worthmentioning';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
